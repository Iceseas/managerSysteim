(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07d4fd51"],{"322a":function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"Icontainer",staticStyle:{display:"flex","flex-direction":"column"}},[e("div",{staticClass:"IcontainerTopRow"},[e("div",{staticClass:"IcontainerTopTitle"},[a._v("查询列表")]),e("div",{staticClass:"IcontainerTopBtns"},[e("Button",{staticClass:"marginR10",attrs:{type:"primary"},on:{click:a.searchFn}},[a._v("查询")]),e("Button",{attrs:{type:"primary"},on:{click:a.resetFn}},[a._v("重置")])],1)]),e("div",{staticClass:"searchFormBody"},[e("Form",{ref:"formList",attrs:{"label-colon":!0,model:a.FormData.data,rules:a.FormData.rules,"label-width":100}},[e("Row",[e("Col",{attrs:{span:6}},[e("FormItem",{attrs:{label:"模糊搜索",prop:"kw"}},[e("Input",{attrs:{clearable:"",placeholder:"用户名/姓名/角色"},model:{value:a.FormData.data.kw,callback:function(t){a.$set(a.FormData.data,"kw",t)},expression:"FormData.data.kw"}})],1)],1)],1)],1)],1)]),e("div",{staticClass:"Icontainer"},[e("div",{staticClass:"IcontainerTopRow"},[e("div",{staticClass:"IcontainerTopTitle"},[a._v("数据列表")]),e("div",{staticClass:"IcontainerTopBtns"},[e("Button",{attrs:{type:"primary"},on:{click:a.openUserFrom}},[a._v("添加用户")])],1)]),e("Table",{attrs:{height:a.table.height,stripe:"",border:"",loadin:a.table.loading,columns:a.table.columns,data:a.table.tableData},scopedSlots:a._u([{key:"userimg",fn:function(a){var t=a.row;return[t.userimg.length>1?e("Avatar",{attrs:{src:t.userimg}}):e("Avatar",{attrs:{icon:"ios-person"}})]}},{key:"gender",fn:function(t){var s=t.row;return["1"===s.gender?e("Tag",{attrs:{size:"large",color:"geekblue"}},[a._v("男")]):e("Tag",{attrs:{size:"large",color:"magenta"}},[a._v("女")])]}},{key:"userRole",fn:function(t){var s=t.row;t.index;return["1"===s.userRole?e("Tag",{attrs:{color:"cyan",size:"large"}},[a._v("老师")]):e("Tag",{attrs:{color:"purple",size:"large"}},[a._v("学生")])]}},{key:"status",fn:function(t){var s=t.row;return["1"===s.status?e("Tag",{attrs:{color:"green",size:"large"}},[a._v("启用")]):e("Tag",{attrs:{color:"red",size:"large"}},[a._v("禁用")])]}},{key:"action",fn:function(t){var s=t.row;t.index;return[e("Button",{staticClass:"marginR10",attrs:{type:"info"},on:{click:function(t){return a.editFn(s)}}},[a._v("编辑")]),e("Button",{staticClass:"marginR10",attrs:{type:"error"},on:{click:function(t){return a.delFn(s)}}},[a._v("删除")]),e("Button",{attrs:{type:"success"}},[a._v("密码重置")])]}}])})],1),e("Page",{attrs:{total:a.table.total,current:a.table.page,"page-size":a.table.pageSize,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":a.pageChange,"on-page-size-change":a.pageSizeChange}}),e("openUserFrom",{ref:"openUserFrom",on:{callBack:a.handleAddNewUser}})],1)},o=[],r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("Modal",{attrs:{width:"30%"},model:{value:a.modalData.modalBoolean,callback:function(t){a.$set(a.modalData,"modalBoolean",t)},expression:"modalData.modalBoolean"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticStyle:{"font-size":"20px"}},[a._v(a._s(a.modalData.title))])]),e("div",[e("Form",{ref:"formList",attrs:{"label-colon":!0,model:a.FormData.data,rules:a.FormData.rules,"label-width":80}},[e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"姓名",prop:"userName"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.userName,callback:function(t){a.$set(a.FormData.data,"userName",t)},expression:"FormData.data.userName"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"用户名",prop:"discount"}},[e("Input",{attrs:{disabled:a.isDisabled,placeholder:"请输入"},model:{value:a.FormData.data.discount,callback:function(t){a.$set(a.FormData.data,"discount",t)},expression:"FormData.data.discount"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"密码",prop:"password"}},[e("Input",{attrs:{disabled:a.isDisabled,type:"password",placeholder:"请输入"},model:{value:a.FormData.data.password,callback:function(t){a.$set(a.FormData.data,"password",t)},expression:"FormData.data.password"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"电话",prop:"telephone"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.telephone,callback:function(t){a.$set(a.FormData.data,"telephone",t)},expression:"FormData.data.telephone"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"性别",prop:"gender"}},[e("Select",{model:{value:a.FormData.data.gender,callback:function(t){a.$set(a.FormData.data,"gender",t)},expression:"FormData.data.gender"}},[e("Option",{attrs:{value:"1",label:"男性"}},[e("span",[a._v("男性")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("male")])]),e("Option",{attrs:{value:"0",label:"女性"}},[e("span",[a._v("女性")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("female")])])],1)],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"角色",prop:"userRole"}},[e("Select",{model:{value:a.FormData.data.userRole,callback:function(t){a.$set(a.FormData.data,"userRole",t)},expression:"FormData.data.userRole"}},[e("Option",{attrs:{value:"1",label:"老师"}},[e("span",[a._v("老师")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("Teacher")])]),e("Option",{attrs:{value:"0",label:"学生"}},[e("span",[a._v("学生")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("Student")])])],1)],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"年级",prop:"userGrade"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.userGrade,callback:function(t){a.$set(a.FormData.data,"userGrade",t)},expression:"FormData.data.userGrade"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"班级",prop:"userClass"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.userClass,callback:function(t){a.$set(a.FormData.data,"userClass",t)},expression:"FormData.data.userClass"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"头像",prop:"userimg"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.userimg,callback:function(t){a.$set(a.FormData.data,"userimg",t)},expression:"FormData.data.userimg"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:"状态",prop:"status"}},[e("Select",{model:{value:a.FormData.data.status,callback:function(t){a.$set(a.FormData.data,"status",t)},expression:"FormData.data.status"}},[e("Option",{attrs:{value:"1",label:"启用"}},[e("span",[a._v("启用")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("use")])]),e("Option",{attrs:{value:"0",label:"禁用"}},[e("span",[a._v("禁用")]),e("span",{staticStyle:{float:"right",color:"#ccc"}},[a._v("useless")])])],1)],1)],1),e("Col",{attrs:{span:12}},[0==a.FormData.data.userRole?e("FormItem",{attrs:{label:"学号",prop:"stuID"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.stuID,callback:function(t){a.$set(a.FormData.data,"stuID",t)},expression:"FormData.data.stuID"}})],1):a._e()],1),e("Col",{attrs:{span:12}},[0==a.FormData.data.userRole?e("FormItem",{attrs:{label:"专业",prop:"major"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:a.FormData.data.major,callback:function(t){a.$set(a.FormData.data,"major",t)},expression:"FormData.data.major"}})],1):a._e()],1)],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{size:"large"},on:{click:a.closeModal}},[a._v("取消")]),e("Button",{attrs:{type:"primary",size:"large"},on:{click:a.addNewQS}},[a._v("确定")])],1)])},l=[],n={data:function(){return{modalData:{title:"添加用户",modalBoolean:!1},nowType:"",isDisabled:!1,rePassword:"",FormData:{rules:{},data:{userName:"",discount:"",password:"",telephone:"",gender:"0",userRole:"1",userGrade:"",userClass:"",userimg:"",status:"1",stuID:"",major:"",isOnline:!1}}}},methods:{init:function(a,t){this.nowType=a,"edit"===a?(this.isDisabled=!0,this.modalData.title="更新用户信息",this.FormData.data=t):"add"===a?(this.isDisabled=!1,this.$refs.formList.resetFields(),this.modalData.title="添加用户"):"show"===a&&(this.FormData.data=t,this.modalData.title="查看用户"),this.modalData.modalBoolean=!0},closeModal:function(){this.modalData.modalBoolean=!1},addNewQS:function(){this.$emit("callBack",this.FormData.data,this.nowType),this.modalData.modalBoolean=!1}}},i=n,d=(e("c140"),e("2877")),c=Object(d["a"])(i,r,l,!1,null,"8c5efa2a",null),u=c.exports,m=e("4ec3"),p={components:{openUserFrom:u},data:function(){return{FormData:{data:{kw:"",pageSize:20,page:1},rules:{}},table:{total:0,pageSize:20,page:1,loading:!1,height:"515",columns:[{title:"序号",type:"index",width:80,align:"center"},{title:"用户名",align:"center",key:"discount"},{title:"头像",align:"center",slot:"userimg",key:"userimg"},{title:"姓名",align:"center",key:"userName"},{title:"性别",align:"center",slot:"gender",key:"gender"},{title:"年级",align:"center",tooltip:!0,key:"userGrade"},{title:"班级",align:"center",tooltip:!0,key:"userClass"},{title:"角色",align:"center",tooltip:!0,slot:"userRole",key:"userRole"},{title:"手机号",align:"center",tooltip:!0,key:"telephone"},{title:"状态",align:"center",slot:"status",tooltip:!0,key:"status"},{title:"操作",slot:"action",width:280,align:"center"}],tableData:[]}}},mounted:function(){this.getList()},methods:{openUserFrom:function(){this.$refs.openUserFrom.init("add","")},handleAddNewUser:function(a,t){var e=this;"add"===t?this.addNewUserAjax(a):"edit"===t&&(this.table.loading=!0,m["b"].updateUserData({_id:a._id,userName:a.userName,discount:a.discount,password:a.password,telephone:a.telephone,gender:a.gender,userRole:a.userRole,userGrade:a.userGrade,userClass:a.userClass,userimg:a.userimg,status:a.status,stuID:a.stuID,major:a.major,isOnline:a.isOnline}).then((function(a){e.Message("success",a.data.msg),e.getList(),e.table.loading=!1})).catch((function(a){e.Message("error",a.data.msg),e.getList(),e.table.loading=!1})))},searchFn:function(){this.table.page=1,this.getList()},editFn:function(a){var t=this;m["b"].getUserData({_id:a._id}).then((function(a){t.Message("success",a.data.msg),t.$refs.openUserFrom.init("edit",a.data.data[0])})).catch((function(a){t.Message("error",a.data.msg)}))},addNewUserAjax:function(a){var t=this;this.table.loading=!0,m["b"].addUser({data:a}).then((function(a){t.getList(),t.Message("success",a.data.msg),t.table.loading=!1})).catch((function(a){t.getList(),t.Message("error",a.data.msg),t.table.loading=!1}))},resetFn:function(){this.$refs.formList.resetFields()},pageSizeChange:function(a){this.table.pageSize=a,this.getList()},pageChange:function(a){this.table.page=a,this.getList()},getList:function(){var a=this;this.FormData.data.pageSize=this.table.pageSize,this.FormData.data.page=this.table.page,this.table.loading=!0,m["b"].getList(this.FormData.data).then((function(t){a.table.tableData=t.data.info.list,a.table.total=t.data.info.count,a.table.loading=!1})).catch((function(t){a.Message("error",t.data.msg),a.table.loading=!1}))},delFn:function(a){var t=this;this.$Modal.confirm({title:"批量删除",content:"<p>确定要删除吗？</p>",onOk:function(){t.delFnAjax(a._id)},onCancel:function(){t.Message("info","取消删除")}})},delFnAjax:function(a){var t=this;m["b"].delData({ids:a}).then((function(a){t.Message("success",a.data.msg),t.getList(),t.table.loading=!1})).catch((function(a){t.Message("error",a.data.msg),t.getList(),t.table.loading=!1}))},Message:function(a,t,e,s){var o,r;o=null===e||void 0===e||""===e?1.5:e,r=null!==s&&void 0!==s&&""!==s&&s,this.$Message.destroy(),this.$Message[a]({content:t,duration:o,closable:r})}}},g=p,h=Object(d["a"])(g,s,o,!1,null,"137d844a",null);t["default"]=h.exports},c140:function(a,t,e){"use strict";var s=e("ee11"),o=e.n(s);o.a},ee11:function(a,t,e){}}]);
//# sourceMappingURL=chunk-07d4fd51.999e5e21.js.map